// VSplitpanes.sass - Finalized Vuetify-styled splitpanes
@use 'sass:map'
@use 'vuetify/settings'

// Base splitpanes styles
.splitpanes
  display: flex
  width: 100%
  height: 100%

.splitpanes--vertical
  flex-direction: row

.splitpanes--horizontal
  flex-direction: column

.splitpanes--dragging *
  -webkit-user-select: none
  user-select: none

.splitpanes__pane
  width: 100%
  height: 100%
  overflow: hidden

.splitpanes--vertical .splitpanes__pane
  transition: width 0.25s cubic-bezier(0.4, 0, 0.2, 1)

.splitpanes--horizontal .splitpanes__pane
  transition: height 0.25s cubic-bezier(0.4, 0, 0.2, 1)

.splitpanes--dragging .splitpanes__pane
  transition: none

.splitpanes__splitter
  touch-action: none

.splitpanes--vertical > .splitpanes__splitter
  min-width: 1px
  cursor: col-resize

.splitpanes--horizontal > .splitpanes__splitter
  min-height: 1px
  cursor: row-resize

// Vuetify theme styles
.splitpanes.v-splitpanes .splitpanes__pane
  background-color: rgb(var(--v-theme-surface))

.splitpanes.v-splitpanes .splitpanes__splitter
  background-color: transparent
  box-sizing: border-box
  position: relative
  flex-shrink: 0

.splitpanes.v-splitpanes .splitpanes__splitter:before,
.splitpanes.v-splitpanes .splitpanes__splitter:after
  content: ''
  position: absolute
  top: 50%
  left: 50%
  background-color: transparent
  transition: background-color 0.2s cubic-bezier(0.4, 0, 0.2, 1)

.splitpanes.v-splitpanes .splitpanes__splitter:hover:before
  background-color: rgb(var(--v-theme-primary))

.splitpanes.v-splitpanes .splitpanes__splitter:hover:after
  background-color: transparent

.splitpanes.v-splitpanes .splitpanes__splitter:first-child
  cursor: auto

.v-splitpanes .splitpanes--dragging
  -webkit-user-select: none
  user-select: none
  pointer-events: none

.v-splitpanes.splitpanes .splitpanes .splitpanes__splitter
  z-index: 1

// Vertical splitter styling
.v-splitpanes.splitpanes--vertical > .splitpanes__splitter
  width: 1px
  border-left: 1px solid rgba(var(--v-border-color), var(--v-border-opacity))
  min-width: 1px
  align-self: stretch
  height: auto
  max-height: 100%
  display: inline-flex
  
  &:before
    transform: translate(-50%, -50%)
    width: 2px
    height: 30px
    left: 50%
    top: 50%
    background-color: rgba(var(--v-border-color), var(--v-border-opacity))

  &:after
    // This is now used exclusively for the hit area.
    content: ''
    position: absolute
    top: 0
    left: -4px
    right: -4px
    bottom: 0
    cursor: col-resize
    z-index: 0
    background-color: transparent

// Horizontal splitter styling
.v-splitpanes.splitpanes--horizontal > .splitpanes__splitter
  height: 1px
  border-top: 1px solid rgba(var(--v-border-color), var(--v-border-opacity))
  min-height: 1px
  width: 100%
  display: block

  &:before
    transform: translate(-50%, -50%)
    width: 30px
    height: 2px
    left: 50%
    top: 50%
    background-color: rgba(var(--v-border-color), var(--v-border-opacity))

  &:after
    // This is now used exclusively for the hit area.
    content: ''
    position: absolute
    top: -4px
    bottom: -4px
    left: 0
    right: 0
    cursor: row-resize
    z-index: 0
    background-color: transparent

// RTL support
.splitpanes[dir="rtl"]
  &.splitpanes--vertical
    flex-direction: row-reverse
  
    & > .splitpanes__splitter
      border-left: none
      border-right: 1px solid rgba(var(--v-border-color), var(--v-border-opacity))

// Accessibility
.splitpanes__splitter:focus-visible
  outline: 2px solid rgb(var(--v-theme-primary))
  outline-offset: -2px

// High contrast support
@media (prefers-contrast: high)
  .splitpanes.v-splitpanes .splitpanes__splitter
    opacity: 1 !important
    
    &:before,
    &:after
      background-color: rgba(var(--v-border-color), 0.87) !important

// Reduced motion support
@media (prefers-reduced-motion: reduce)
  .splitpanes--vertical .splitpanes__pane,
  .splitpanes--horizontal .splitpanes__pane
    transition: none

  .splitpanes.v-splitpanes .splitpanes__splitter:before,
  .splitpanes.v-splitpanes .splitpanes__splitter:after
    transition: none